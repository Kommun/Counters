<paging:MtPage
    x:Class="Counters.AddCounter"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Counters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:paging="using:MyToolkit.Paging"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <paging:MtPage.Resources>

        <local:BooleanToVisibilityConverter x:Key="conv"/>

        <DataTemplate x:Key="tbTypeFull">
            <TextBlock Text="{Binding CounterType}" Margin="10,5" FontSize="30" FontWeight="SemiBold"/>
        </DataTemplate>

    </paging:MtPage.Resources>


    <Pivot Name="pageSelector">
        <PivotItem Header="Счетчик">
            <ScrollViewer>
                <StackPanel Name="spCounter">
                    <TextBlock Text="Тип счетчика" Foreground="Gray" FontSize="17"/>

                    <Button x:Name="btnType" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left"
                        Content="{Binding ElementName=tbType,Path=SelectedItem.CounterType}">
                        <Button.Flyout>
                            <ListPickerFlyout x:Name="tbType" Title="Тип счетчика" ItemTemplate="{StaticResource tbTypeFull}">
                                <ListPickerFlyout.ItemsSource>
                                    <local:TypeItems>
                                        <local:QueryResult TypeId="1"/>
                                        <local:QueryResult TypeId="2"/>
                                        <local:QueryResult TypeId="3"/>
                                        <local:QueryResult TypeId="4"/>
                                        <local:QueryResult TypeId="5"/>
                                        <local:QueryResult TypeId="6"/>
                                    </local:TypeItems>
                                </ListPickerFlyout.ItemsSource>
                            </ListPickerFlyout>
                        </Button.Flyout>
                    </Button>
                    <TextBlock Text="Название" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                    <TextBox Name="tbName" Text="{Binding Name}"/>
                    <StackPanel Name="spBeginData">
                        <TextBlock Text="Начальные показания" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                        <TextBox Name="tbBeginData" InputScope="Number" MaxLength="10" Text="0"/>
                    </StackPanel>
                    <TextBlock Text="Общедомовые нужды (ОДН)" Foreground="Gray" Margin="0,10,0,-20" FontSize="17"/>
                    <ToggleSwitch Name="btnEnableODN" IsOn="{Binding EnableODN}"/>
                </StackPanel>
            </ScrollViewer>
        </PivotItem>

        <PivotItem Header="Тариф">
            <ScrollViewer>
                <StackPanel Name="spTarif">
                    <TextBlock Text="Тип тарифа" Foreground="Gray" FontSize="17"/>
                    <ComboBox x:ConnectionId='1' Name="cbType"                                           >
                        <ComboBox.Items>
                            <ComboBoxItem Content="Простой"/>
                            <ComboBoxItem Content="Двухставочный"/>
                            <ComboBoxItem Content="Трехставочный"/>
                        </ComboBox.Items>
                    </ComboBox>
                    <StackPanel Name="spFirstTarif">
                        <TextBlock Name="tTarif1" Text="Тариф до порога 1" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                        <TextBox Name="tbTarif1" InputScope="Number" MaxLength="10" Text="{Binding Tarif1}"/>
                        <TextBlock Name="tLimit1" Text="Порог 1" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                        <TextBox Name="tbLimit1" InputScope="Number" MaxLength="10" Text="{Binding Limit1}"/>
                    </StackPanel>
                    <StackPanel Name="spSecondTarif">
                        <TextBlock Name="tTarif2" Text="Тариф от порога 1 до порога 2" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                        <TextBox Name="tbTarif2" InputScope="Number" MaxLength="10" Text="{Binding Tarif2}"/>
                        <TextBlock Name="tLimit2" Text="Порог 2" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                        <TextBox Name="tbLimit2" InputScope="Number" MaxLength="10" Text="{Binding Limit2}"/>
                    </StackPanel>
                    <TextBlock Name="tTarif3" Text="Тариф" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                    <TextBox Name="tbTarif3" InputScope="Number" MaxLength="10" Text="{Binding Tarif3}"/>
                </StackPanel>
            </ScrollViewer>
        </PivotItem>
    </Pivot>

    <paging:MtPage.BottomAppBar>
        <CommandBar>
            <AppBarButton x:ConnectionId='2' Name="btnSave" Label="Сохранить" Icon="Accept"                      />
        </CommandBar>
    </paging:MtPage.BottomAppBar>

</paging:MtPage>

