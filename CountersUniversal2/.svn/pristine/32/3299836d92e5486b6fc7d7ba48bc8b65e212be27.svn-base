<Page
    x:Class="Counters.AddCounter"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Counters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>

        <local:BooleanToVisibilityConverter x:Key="conv"/>

        <DataTemplate x:Key="tbTypeFull">
            <TextBlock Text="{Binding CounterType}" Margin="10,5" FontSize="30" FontWeight="SemiBold"/>
        </DataTemplate>

    </Page.Resources>


    <Pivot Name="pageSelector">
        <PivotItem Header="Счетчик">
            <ScrollViewer>
                <StackPanel Name="spCounter" Margin="10,0">
                    <TextBlock Text="Тип счетчика" Foreground="Gray" FontSize="17"/>

                    <Button x:Name="btnType" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left"
                        Content="{Binding ElementName=tbType,Path=SelectedItem.CounterType}">
                        <Button.Flyout>
                            <ListPickerFlyout x:Name="tbType" Title="Тип счетчика" ItemTemplate="{StaticResource tbTypeFull}">
                                <ListPickerFlyout.ItemsSource>
                                    <local:TypeItems>
                                        <local:QueryResult TypeId="1"/>
                                        <local:QueryResult TypeId="2"/>
                                        <local:QueryResult TypeId="3"/>
                                        <local:QueryResult TypeId="4"/>
                                        <local:QueryResult TypeId="5"/>
                                        <local:QueryResult TypeId="6"/>
                                    </local:TypeItems>
                                </ListPickerFlyout.ItemsSource>
                            </ListPickerFlyout>
                        </Button.Flyout>
                    </Button>
                    <TextBlock Text="Название" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                    <TextBox Name="tbName" Text="{Binding Name}"/>
                    <StackPanel Name="spBeginData">
                        <TextBlock Text="Начальные показания" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                        <TextBox Name="tbBeginData" InputScope="Number" MaxLength="10" Text="0"/>
                    </StackPanel>
                    <TextBlock Text="Общедомовые нужды (ОДН)" Foreground="Gray" Margin="0,10,0,-20" FontSize="17"/>
                    <ToggleSwitch Name="btnEnableODN" IsOn="{Binding EnableODN}"/>
                </StackPanel>
            </ScrollViewer>
        </PivotItem>

        <PivotItem Header="Тариф">
            <ScrollViewer>
                <StackPanel Name="spTarif" Margin="10,0">
                    <TextBlock Text="Учитывать соцнорму" Foreground="Gray" Margin="0,0,0,-20" FontSize="17"/>
                    <ToggleSwitch Name="btnIsSocial" IsOn="{Binding IsSocial, Mode=TwoWay}" FontSize="17"/>
                    <StackPanel Visibility="{Binding ElementName=btnIsSocial, Path=IsOn, Converter={StaticResource conv}}">
                        <TextBlock Text="Соцнорма" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                        <TextBox Name="tbSocialNorma" InputScope="Number" MaxLength="10" Text="{Binding SocialNorma}"/>
                        <TextBlock Text="Соцтариф" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                        <TextBox Name="tbSocialTarif" InputScope="Number" MaxLength="10" Text="{Binding SocialTariff}"/>
                    </StackPanel>
                    <TextBlock Text="Тариф" Foreground="Gray" Margin="0,10,0,0" FontSize="17"/>
                    <TextBox Name="tbTarif" InputScope="Number" MaxLength="10" Text="{Binding Tariff}"/>
                </StackPanel>
            </ScrollViewer>
        </PivotItem>
    </Pivot>

    <Page.BottomAppBar>
        <CommandBar>
            <AppBarButton x:ConnectionId='1' Name="btnSave" Label="Сохранить" Icon="Accept"                      />
        </CommandBar>
    </Page.BottomAppBar>

</Page>

