<Page
    x:Class="Counters.Counters"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Counters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>

        <DataTemplate x:Key="lbiCounter">
            <Grid x:ConnectionId='1' Margin="0,10" Name="grdData"                                                  >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Grid Height="60" Width="60" Margin="0,0,20,0" Grid.RowSpan="2" VerticalAlignment="Center">
                    <Border Background="{Binding IconColor}" CornerRadius="10">
                        <Image Source="{Binding Icon}" Margin="5"/>
                    </Border>
                </Grid>
                <TextBlock Text="{Binding Name}" FontSize="25" FontWeight="SemiBold" Grid.Column="1"/>
                <TextBlock Text="{Binding stringData}" HorizontalAlignment="Right" FontSize="18" Grid.Column="1"/>
                <TextBlock Text="{Binding stringDate}" FontSize="18" Grid.Row="1" Grid.Column="1"/>
                <TextBlock Text="{Binding stringFullSumm}" HorizontalAlignment="Right" FontSize="18" FontWeight="Bold" Grid.Row="1" Grid.Column="1"/>

                <FlyoutBase.AttachedFlyout>
                    <MenuFlyout>
                        <MenuFlyoutItem x:ConnectionId='2' x:Name="btnChange" Text="Изменить"                        />
                        <MenuFlyoutItem x:ConnectionId='3' x:Name="btnDelete" Text="Удалить"                        />
                    </MenuFlyout>
                </FlyoutBase.AttachedFlyout>
            </Grid>
        </DataTemplate>

    </Page.Resources>

    <Pivot>
        <PivotItem Header="Счетчики">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <ListView Name="lbCounters" ItemTemplate="{StaticResource lbiCounter}" ItemContainerStyle="{StaticResource lbiContainerStyle}"/>
                <Border Name="grdSumm" Grid.Row="1" BorderThickness="0,2,0,0" BorderBrush="LightGray"  Visibility="Collapsed">
                    <Grid>
                        <TextBlock  Text="Итого:" FontSize="25"/>
                        <TextBlock Name="tbSumm" HorizontalAlignment="Right" FontSize="25" FontWeight="Bold"/>
                    </Grid>
                </Border>
            </Grid>
        </PivotItem>
    </Pivot>

    <Page.BottomAppBar>
        <CommandBar>
            <AppBarButton x:ConnectionId='4' Name="btnAdd" Label="Добавить счетчик" Icon="Add"                     />
            <AppBarButton x:ConnectionId='5' Name="btnMoney" Label="Показать сумму"                       >
                <AppBarButton.Icon>
                    <BitmapIcon UriSource="ms-appx:///Images/AppBar/money.png"/>
                </AppBarButton.Icon>
            </AppBarButton>
        </CommandBar>
    </Page.BottomAppBar>

</Page>

